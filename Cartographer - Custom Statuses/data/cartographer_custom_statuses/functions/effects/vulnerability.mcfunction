data modify storage ca.exposed_data lvl set value {}
data modify storage ca.exposed_data hurt set value {}

data modify storage ca.exposed_data lvl set from entity @s ActiveEffects[{Id:31}]
data modify storage ca.exposed_data hurt set from entity @s HurtTime

execute store result score @s ca.exposed_lvl run data get storage ca.exposed_data lvl.Amplifier
scoreboard players add @s ca.exposed_lvl 1

execute store result score @s ca.exposed_hit run data get storage ca.exposed_data hurt

execute if entity @s[scores={ca.exposed_lvl=1,ca.exposed_hit=9}] run scoreboard players set @s cdl.damage_queue 1
execute if entity @s[scores={ca.exposed_lvl=1,ca.exposed_hit=9}] run function cd:lib/mob/damage/true

execute if entity @s[scores={ca.exposed_lvl=2,ca.exposed_hit=9}] run scoreboard players set @s cdl.damage_queue 2
execute if entity @s[scores={ca.exposed_lvl=2,ca.exposed_hit=9}] run function cd:lib/mob/damage/true

execute if entity @s[scores={ca.exposed_lvl=3,ca.exposed_hit=9}] run scoreboard players set @s cdl.damage_queue 3
execute if entity @s[scores={ca.exposed_lvl=3,ca.exposed_hit=9}] run function cd:lib/mob/damage/true

execute if entity @s[scores={ca.exposed_lvl=4,ca.exposed_hit=9}] run scoreboard players set @s cdl.damage_queue 4
execute if entity @s[scores={ca.exposed_lvl=4,ca.exposed_hit=9}] run function cd:lib/mob/damage/true

execute if entity @s[scores={ca.exposed_lvl=5,ca.exposed_hit=9}] run scoreboard players set @s cdl.damage_queue 5
execute if entity @s[scores={ca.exposed_lvl=5,ca.exposed_hit=9}] run function cd:lib/mob/damage/true

execute if entity @s[scores={ca.exposed_lvl=6,ca.exposed_hit=9}] run scoreboard players set @s cdl.damage_queue 6
execute if entity @s[scores={ca.exposed_lvl=6,ca.exposed_hit=9}] run function cd:lib/mob/damage/true

execute if entity @s[scores={ca.exposed_lvl=7,ca.exposed_hit=9}] run scoreboard players set @s cdl.damage_queue 7
execute if entity @s[scores={ca.exposed_lvl=7,ca.exposed_hit=9}] run function cd:lib/mob/damage/true

execute if entity @s[scores={ca.exposed_lvl=8,ca.exposed_hit=9}] run scoreboard players set @s cdl.damage_queue 8
execute if entity @s[scores={ca.exposed_lvl=8,ca.exposed_hit=9}] run function cd:lib/mob/damage/true

execute if entity @s[scores={ca.exposed_lvl=9,ca.exposed_hit=9}] run scoreboard players set @s cdl.damage_queue 9
execute if entity @s[scores={ca.exposed_lvl=9,ca.exposed_hit=9}] run function cd:lib/mob/damage/true

execute if entity @s[scores={ca.exposed_lvl=10,ca.exposed_hit=9}] run scoreboard players set @s cdl.damage_queue 10
execute if entity @s[scores={ca.exposed_lvl=10,ca.exposed_hit=9}] run function cd:lib/mob/damage/true

execute if entity @s[scores={ca.exposed_lvl=1..,ca.exposed_hit=9}] run playsound minecraft:block.glass.break hostile @a[distance=..20] ~ ~ ~ 1 1.5 
execute if entity @s[scores={ca.exposed_lvl=1..,ca.exposed_hit=9}] run playsound minecraft:block.amethyst_cluster.break hostile @a[distance=..20] ~ ~ ~ 1 0.75
execute if entity @s[scores={ca.exposed_lvl=1..,ca.exposed_hit=9}] run playsound minecraft:block.amethyst_block.chime hostile @a[distance=..20] ~ ~ ~ 5 1.5

execute if entity @s[scores={ca.exposed_lvl=1..,ca.exposed_hit=9}] run particle minecraft:glow ~ ~1 ~ 0.2 0.5 0.2 10 10 normal
