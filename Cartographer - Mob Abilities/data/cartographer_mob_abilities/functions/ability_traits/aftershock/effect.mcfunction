playsound minecraft:entity.generic.explode hostile @a[distance=..16] ~ ~ ~ 1 1.25

particle minecraft:explosion ~ ~-0.5 ~ 1.5 0 1.5 0 25 normal

particle minecraft:dust 0.792 0.792 0.792 0.5 ~3 ~0.5 ~ 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~2.625 ~0.5 ~0.375 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~2.625 ~0.5 ~0.75 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~2.25 ~0.5 ~1.125 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~2.25 ~0.5 ~1.5 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~1.875 ~0.5 ~1.875 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~1.5 ~0.5 ~2.25 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~1.125 ~0.5 ~2.25 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~0.75 ~0.5 ~2.625 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~0.375 ~0.5 ~2.625 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~ ~0.375 ~3 0.4 0 0.4 0.01 3 normal @a

particle minecraft:dust 0.792 0.792 0.792 0.5 ~-3 ~0.5 ~ 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~-2.625 ~0.5 ~0.375 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~-2.625 ~0.5 ~0.75 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~-2.25 ~0.5 ~1.125 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~-2.25 ~0.5 ~1.5 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~-1.875 ~0.5 ~1.875 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~-1.5 ~0.5 ~2.25 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~-1.125 ~0.5 ~2.25 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~-0.75 ~0.5 ~2.625 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~-0.375 ~0.5 ~2.625 0.4 0 0.4 0.01 3 normal @a

particle minecraft:dust 0.792 0.792 0.792 0.5 ~-2.625 ~0.5 ~-0.375 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~-2.625 ~0.5 ~-0.75 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~-2.25 ~0.5 ~-1.125 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~-2.25 ~0.5 ~-1.5 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~-1.875 ~0.5 ~-1.875 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~-1.5 ~0.5 ~-2.25 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~-1.125 ~0.5 ~-2.25 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~-0.75 ~0.5 ~-2.625 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~-0.375 ~0.5 ~-2.625 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~ ~0.5 ~-3 0.4 0 0.4 0.01 3 normal @a

particle minecraft:dust 0.792 0.792 0.792 0.5 ~2.625 ~0.5 ~-0.375 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~2.625 ~0.5 ~-0.75 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~2.25 ~0.5 ~-1.125 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~2.25 ~0.5 ~-1.5 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~1.875 ~0.5 ~-1.875 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~1.5 ~0.5 ~-2.25 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~1.125 ~0.5 ~-2.25 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~0.75 ~0.5 ~-2.625 0.4 0 0.4 0.01 3 normal @a
particle minecraft:dust 0.792 0.792 0.792 0.5 ~0.375 ~0.5 ~-2.625 0.4 0 0.4 0.01 3 normal @a

execute store result score $aftershock ca.ability_dmg run attribute @s generic.attack_damage get
scoreboard players operation $aftershock ca.ability_dmg /= $2 ca.CONSTANT

execute as @a[distance=..3.5] at @s run function cartographer_mob_abilities:ability_traits/aftershock/player

execute if entity @a[distance=..3.5] run function cartographer_mob_abilities:ability_traits/call_all_traits

tag @a[distance=..3.5] remove ability_tagged

data modify entity @s Motion[1] set value 0.4